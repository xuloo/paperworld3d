<project name="build-paperworld" default="all" basedir=".">

	<property file="build.properties"/>
	
	<taskdef resource="flexTasks.tasks" classpath="flexTasks.jar" />
	<taskdef name="xmltask" classname="com.oopsconsultancy.xmltask.ant.XmlTask" classpath="lib/xmltask-v1.15.1.jar"/>
	<taskdef classpath="lib/ant-contrib-1.0b3.jar" resource="net/sf/antcontrib/antlib.xml"/>

	<!-- builds everything; client libraries and docs, server libraries and docs, all examples -->
	<target name="all">
		<antcall target="build-client"/>
		<antcall target="build-server"/>
		<antcall target="build-examples"/>
	</target>
	
	<target name="build-client">
		<ant antfile="../client/build/build.xml" inheritall="false"/>
	</target>
	
	<target name="build-server">
		<ant antfile="../server/build/build.xml" inheritall="false"/>		
	</target>
	
	<target name="build-examples">
		
		<for list="${examples}" param="example">
			<sequential>			
				
				<echo>Building Example => @{example}</echo>
				<antcall target="build-example" >					
				 	<param name="example" value="@{example}"/>
				</antcall>

			</sequential>
		</for>
		
	</target>

	<!-- allows building a single example. Use with -D switch i.e. ant build-example -Dexample=HelloPaperWorld -->
	<target name="build-example">
		<ant antfile="../examples/${example}Client/build/build.xml" inheritall="false"/>
	</target>
	
</project>